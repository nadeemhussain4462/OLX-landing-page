(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[67],{1078:function(e,t,n){"use strict";var a=n(0),o=n.n(a),s=n(25),i=n(853),c=n(56),l=n.n(c),r=n(1250),u=n.n(r),p=n(1145);const h=e=>{let{name:t,onSelect:n,highlight:a,iconClass:c,icon:r,showLabel:h,showFullText:d,id:m}=e;return o.a.createElement("div",{"data-aut-id":"locationItem",className:u.a.locationOption,onClick:n},o.a.createElement(i.a,{className:l()(u.a.icon,c),direction:"ltr",icon:r,name:"IconButton",id:m}),o.a.createElement("div",{className:u.a.text},h&&o.a.createElement("div",{className:u.a.currentLocationLabel},o.a.createElement(s.FormattedMessage,{id:"useCurrentLocationLabel"})),a?o.a.createElement(p.a,{text:t,term:a}):o.a.createElement("span",{className:l()({[u.a.fullText]:d})},t)))};h.defaultProps={icon:"location",iconClass:"",showLabel:!1,showFullText:!1,id:"",name:"",onSelect:()=>{}},t.a=h},1142:function(e,t,n){"use strict";n(247),n(320);var a=n(0),o=n.n(a),s=n(202),i=n(25),c=n(56),l=n.n(c),r=n(1180),u=n.n(r),p=n(853);t.a=Object(i.injectIntl)(e=>{let{intl:t,onClose:n}=e;return o.a.createElement("div",{"data-aut-id":"gps-blocked-modal"},o.a.createElement(s.a,{isOpened:!0,overlayClassName:l()(u.a.gpsBlocked),contentClassName:l()(u.a.modal),onClose:n},o.a.createElement("div",{className:l()(u.a.close)},o.a.createElement(p.a,{dataAutId:"btnClose",onClick:n,icon:"cross",size:24,color:"blackIcons"})),o.a.createElement("div",{className:l()(u.a.container)},o.a.createElement("div",{className:l()(u.a.title)},o.a.createElement("span",null,t.formatMessage({id:"geolocation_blocked"}))),o.a.createElement("div",{className:l()(u.a.description)},o.a.createElement("span",null,t.formatMessage({id:"geolocation_blocked_description"}))))))})},1145:function(e,t,n){"use strict";n(40),n(251),n(167),n(33),n(166);var a=n(0),o=n.n(a),s=n(26);const i=e=>{let{text:t,term:n,caseSensitive:a}=e;if(!n)return o.a.createElement("span",null,t);const i=Object(s.e)(n.trim()),c=new RegExp(i,a?"":"i"),l=c.exec(t)?c.exec(t)[0]:n;return o.a.createElement("span",null,t.split(c).reduce((e,t,a)=>a?e.concat(o.a.createElement("b",{key:n+t},l),t):[t],[]))};i.defaultProps={term:null,caseSensitive:!1},t.a=i},1180:function(e,t,n){e.exports={gpsBlocked:"_2jpuP",modal:"_1ODbZ",close:"IC_2Q",container:"_3c7lV",title:"vzZv8",description:"-MdET"}},1194:function(e,t,n){e.exports={sectionLocations:"J5Oaw",sectionLocationsTitle:"_394vO",currentLocationIcon:"N5UMO",currentLocation:"_3bkgS"}},1250:function(e,t,n){e.exports={locationOption:"_1jtbH",icon:"_1k7ch",text:"_3z-s0",fullText:"_3Aqq7",currentLocationLabel:"_1nWq6"}},1260:function(e,t,n){"use strict";n(36),n(20);var a=n(62),o=n.n(a),s=n(3),i=n.n(s),c=n(0),l=n.n(c),r=n(45),u=n(38),p=n(71),h=n.n(p),d=n(168),m=n(336),g=n(46),L=n(60);t.a=e=>{class t extends l.a.Component{constructor(){super(...arguments),i()(this,"componentDidMount",()=>this.getPopularLocations()),i()(this,"componentDidUpdate",()=>this.getPopularLocations()),i()(this,"getPopularLocations",()=>{this.props.marketConfig.get("enableTopLocations")&&this.props.dispatch(Object(d.e)())})}render(){const{isFetchingPopular:t,popular:n}=this.props;return l.a.createElement(e,o()({},this.props,{isFetchingPopularLocations:t,popularLocations:n}))}}t.fetchData=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];const[o,,,s]=n,i=[e.fetchData?e.fetchData(...n):Promise.resolve()];return Promise.all(i).then(()=>s.config&&s.config.enableTopLocations?o(Object(d.e)()):Promise.resolve())};const n=e.displayName||e.name||"Component";t.displayName="withPopularLocations("+n+")";const a=Object(u.compose)(Object(L.b)("marketConfig"),Object(r.connect)(e=>({popular:Object(m.f)(e),isFetchingPopular:Object(m.d)(e),countryLocation:Object(g.countryLocationSelector)(e)})))(t);return h()(a,e,{fetchData:!0})}},1384:function(e,t,n){var a=n(1385),o=n(1386)((function(e,t){return null==e?{}:a(e,t)}));e.exports=o},1385:function(e,t,n){var a=n(493),o=n(492);e.exports=function(e,t){return a(e,t,(function(t,n){return o(e,n)}))}},1386:function(e,t,n){var a=n(358),o=n(494),s=n(495);e.exports=function(e){return s(o(e,void 0,a),e+"")}},1388:function(e,t,n){"use strict";n(20);var a=n(0),o=n.n(a),s=n(267),i=n.n(s),c=n(38),l=n(45),r=n(25),u=n(1194),p=n.n(u),h=n(1078),d=n(206),m=n(14),g=n(46);t.a=Object(c.compose)(Object(l.connect)(e=>({gpsData:Object(g.gpsSelector)(e)}),e=>({getNearByAds:t=>e(Object(d.b)(t))})),r.injectIntl)(e=>{let{onChange:t,onLoading:n,getNearByAds:s,intl:c,gpsData:l}=e;const r=function(e,t){let{location:n={},status:a=null,isFetching:o}=e;const s=n&&Object.keys(n).length;if(o&&!s)return t.formatMessage({id:"fetchingLocationLabel"});if(null===a||"prompt"===a)return t.formatMessage({id:"enableLocationLabel"});if("rejected"===a)return t.formatMessage({id:"gpsBlockedLabel"});if(s){return Array.from(new Set(i()(n,"name"))).join(", ")}return t.formatMessage({id:"current_gps_location_label"})}(l,c),u=Object(a.useCallback)(()=>s(n).then(e=>t(e,{location_type:m.Y})).catch(()=>t()),[s,n,t]);return o.a.createElement("div",{className:p.a.sectionLocations+" "+p.a.currentLocation},o.a.createElement(h.a,{name:r,icon:"crosshairs",onSelect:u,id:p.a.currentLocationIcon,showLabel:!0,showFullText:"rejected"===l.status}))})},1633:function(e,t,n){e.exports={locationAutocomplete:"_3hLH0",containerInput:"_3B6d0",inputLocation:"_2xvhw",arrowIcon:"_1fwdq",arrowIconUp:"_3K9uU",defaultOptions:"XV1Vg",suggestionsOptions:"_1PMKr",hide:"_1mMzE",fullPageLoader:"xcTIF",iconLoader:"_2sUw_",tryAgain:"_3gTdk"}},1635:function(e,t,n){e.exports={locationSuggestions:"-cMA-",containerOptions:"_2HzJo"}},1637:function(e,t,n){e.exports={errorMessage:"_3JXP2",content:"_1Ve0U",close:"_1EY0K"}},1942:function(e,t,n){"use strict";n.r(t),n.d(t,"WAIT_INTERVAL",(function(){return W})),n.d(t,"LocationAutocomplete",(function(){return J}));n(166);var a=n(3),o=n.n(a),s=(n(315),n(310),n(195),n(194),n(849),n(0)),i=n.n(s),c=n(56),l=n.n(c),r=n(38),u=n(201),p=n(313),h=n(848),d=n(309),m=n(1633),g=n.n(m),L=n(1384),f=n.n(L),E=n(45),C=n(46),O=n(359),b=n(86),v=n(168),S=n(25),_=n(18),T=n(81),N=n(60),k=n(1260),w=n(1194),j=n.n(w),x=n(1078),y=n(14);var M=e=>{let{popularLocations:t=[],maxLocations:n,onChange:a}=e;const o=t&&t.slice(0,n);return o.length?i.a.createElement("div",{className:j.a.sectionLocations},i.a.createElement("div",{className:j.a.sectionLocationsTitle},i.a.createElement(S.FormattedMessage,{id:"popularLocations"})),i.a.createElement("div",null,o.map((e,t)=>i.a.createElement(x.a,{key:t,name:e.name,onSelect:()=>a(e,{location_type:y.Z})})))):null};var I=e=>{let{selectedLocation:t={},recentLocations:n,onChange:a}=e;const o=n&&!!n.length&&n.filter(e=>e.id!==t.id);return o.length?i.a.createElement("div",{className:j.a.sectionLocations},i.a.createElement("div",{className:j.a.sectionLocationsTitle},i.a.createElement(S.FormattedMessage,{id:"recentLocations"})),i.a.createElement("div",null,o.map((e,t)=>i.a.createElement(x.a,{key:t,name:e.name,onSelect:()=>a(e,{location_type:y.ab})})))):null},P=n(149),F=n(1635),A=n.n(F);var D=e=>{let{suggestions:t,onChange:n,searchTerm:a,suggestionsListClass:o}=e;return i.a.createElement("div",{className:l()(o,A.a.locationSuggestions)},i.a.createElement("div",{className:A.a.containerOptions},t&&t.map(e=>i.a.createElement(x.a,{key:e.id,name:Object(P.a)(e.addressComponents)||e.name,highlight:a,onSelect:()=>n(e,{location_type:y.bb})}))))},G=n(1388),B=(n(20),n(311)),U=n(1637),H=n.n(U);const{icons:z}=B.a;class V extends i.a.Component{constructor(){super(...arguments),o()(this,"componentDidMount",()=>document.addEventListener("mousedown",this.handleClickOutside)),o()(this,"componentWillUnmount",()=>document.removeEventListener("mousedown",this.handleClickOutside)),o()(this,"handleClickOutside",e=>{this.containerRef&&!this.containerRef.contains(e.target)&&this.props.onClose()})}render(){const{elementNode:e,onClose:t,message:n}=this.props,a=e&&{width:e.offsetWidth,top:e.offsetHeight+e.offsetTop+5,left:e.offsetLeft};return e?i.a.createElement("div",{className:H.a.errorMessage,style:a,ref:e=>this.containerRef=e},i.a.createElement("div",{className:H.a.content},i.a.createElement("span",{className:l()(z.panameraIcons,z["icon-Cross"],H.a.close),onClick:t}),n)):null}}o()(V,"defaultProps",{onClose:()=>{}});var R=V,K=n(206),q=n(1142);const W=300;class J extends i.a.Component{constructor(e){super(e),o()(this,"componentDidUpdate",e=>{const{selectedLocation:t,isSelectedLocationGPSSelector:n,selectedLocationName:a}=this.props;t.id===e.selectedLocation.id&&n===e.isSelectedLocationGPSSelector||this.setState({input:a})}),o()(this,"focusInputContainer",()=>{this.inputContainer&&(this.inputContainer.select(),this.inputContainer.click())}),o()(this,"handleCloseTooltip",()=>this.setState({showError:!1})),o()(this,"handleLoading",e=>{this.setState({isLoading:e}),this.props.onLoading(e)}),o()(this,"handleOnchange",(e,t)=>{e?(this.setState({isTyping:!1},()=>this.props.onChange(e,t)),Object(b.h)(e)):this.handleGpsMessage()}),o()(this,"handleOnFocus",()=>{this.props.onFocus("location"),this.focusInputContainer(),this.props.track(y.F,{origin:this.props.trackOrigin,select_from:this.props.trackSelectFrom,place_selected_id:this.props.selectedLocation.id})}),o()(this,"handleOnFocusIcon",()=>this.focusInputContainer()),o()(this,"handleChangeValue",e=>{clearTimeout(this.timer);const t=e.currentTarget.value;t.trim().length>0?this.setState({input:t,isTyping:!0},()=>{t.length>2&&(this.timer=setTimeout(this.handleGetSuggestions,W))}):this.setState({input:"",isTyping:!1})}),o()(this,"handleGetSuggestions",()=>this.props.getSuggestions(f()(this.state,"input","limit"))),o()(this,"handleClearInput",()=>{this.setState({input:"",isTyping:!1}),this.focusInputContainer()}),o()(this,"handleTryAgain",()=>{this.handleCloseTooltip(),this.focusInputContainer()}),o()(this,"handleGpsMessage",()=>{Object(K.a)().then(()=>this.handleCloseGpsMessage()).catch(()=>this.setState({showGpsBlockedMessage:!0}))}),o()(this,"handleCloseGpsMessage",()=>this.setState({showGpsBlockedMessage:!1},this.handleOnFocusIcon)),this.state={isTyping:!1,limit:5,input:e.selectedLocationName,loggedUser:_.a.getUser(),isLoading:!1,showError:!1,showGpsBlockedMessage:!1},this.translations={currentLocation:{id:"use_current_location"},searchLocationHint:{id:"searchLocationHint"},locationErrorTooltip:{id:"locationErrorTooltip"},locationErrorTooltipTry:{id:"locationErrorTooltipTry"}},this.inputContainer=null}componentDidMount(){this.inputContainer&&this.props.defaultFocus&&this.focusInputContainer(),this.timer=null,this.props.updateGPSStatus()}render(){const e=this.props.suggestions(f()(this.state,"input","limit"))||[],{visible:t,popularLocations:n,config:a,selectedLocation:o,suggestionsClass:s,intl:c,withArrow:r}=this.props,{isTyping:m,input:L,showError:E,isLoading:C,showGpsBlockedMessage:b}=this.state,v=Object(O.b)(),S=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,c.formatMessage(this.translations.locationErrorTooltip)," "),i.a.createElement("span",{className:g.a.tryAgain,onClick:this.handleTryAgain},c.formatMessage(this.translations.locationErrorTooltipTry))),_=r?i.a.createElement("span",{className:l()(g.a.arrowIcon,t?g.a.arrowIconUp:"")},i.a.createElement(h.a,{icon:"arrowDown",color:"blackText",animation:!1,onClick:t?this.props.onLostFocus:this.handleOnFocus})):null;return i.a.createElement("div",{className:g.a.locationAutocomplete},i.a.createElement("div",{"data-aut-id":"locationBox",className:g.a.containerInput,ref:e=>this.containerTooltip=e},C?i.a.createElement(p.a,{className:g.a.iconLoader,containerSize:"32px"}):i.a.createElement("span",null,i.a.createElement(d.a,{icon:"search",color:"blackText",size:25})),i.a.createElement("input",{className:g.a.inputLocation,value:L,placeholder:c.formatMessage(this.translations.searchLocationHint),onChange:this.handleChangeValue,onFocus:this.handleOnFocus,ref:e=>{this.inputContainer=e}}),m?i.a.createElement("span",{className:g.a.clearIcon},i.a.createElement(h.a,{icon:"cross",color:"blackText",animation:!1,onClick:this.handleClearInput})):_,E&&i.a.createElement(R,{message:S,elementNode:this.containerTooltip,onClose:this.handleCloseTooltip})),t&&(e&&!!e.length||!m)&&i.a.createElement("div",{className:l()(g.a.wrapperOptions,s)},e&&!!e.length&&i.a.createElement(D,{suggestions:e,onChange:this.handleOnchange,searchTerm:L,suggestionsListClass:g.a.suggestionsOptions}),!m&&i.a.createElement("div",{className:g.a.defaultOptions},i.a.createElement(G.a,{onChange:this.handleOnchange,onLoading:this.handleLoading}),i.a.createElement(I,{selectedLocation:o,recentLocations:v,onChange:this.handleOnchange}),i.a.createElement(M,{popularLocations:n,maxLocations:a.get("searchHeader","maxPopularLocations"),onChange:this.handleOnchange}))),C&&this.props.showLoading&&i.a.createElement(u.a,{className:g.a.fullPageLoader,text:c.formatMessage({id:"loadingAdsToRelocate"})}),b&&i.a.createElement(q.a,{onClose:this.handleCloseGpsMessage}))}}o()(J,"defaultProps",{config:{},getSuggestions:()=>{},suggestions:()=>{},selectedLocation:{},trackOrigin:"",onChange:()=>{},onFocus:()=>{},onLostFocus:()=>{},suggestionsClass:"",defaultFocus:!1,showLoading:!0,visible:!1,onLoading:()=>{},onClickOutside:()=>{},withArrow:!1,updateGPSStatus:()=>{}});t.default=Object(r.compose)(T.a,N.a,k.a,S.injectIntl,Object(E.connect)((e,t)=>({suggestions:t=>Object(C.suggestionsSelector)(e,t),trackOrigin:e.track.origin,selectedLocation:Object(C.selectedLocationSelector)(e),isSelectedLocationGPSSelector:Object(C.isSelectedLocationGPSSelector)(e),selectedLocationName:Object(C.selectedLocationNameSelector)(e,t)}),e=>({getSuggestions:t=>e(Object(v.f)(t)),updateGPSStatus:()=>e(Object(v.j)())})))(J)}}]);
//# sourceMappingURL=desktop-locationOld.olx.84895743dfc33663c7a0.js.map